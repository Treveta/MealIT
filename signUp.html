<!DOCTYPE html>
<html>
    <body>
        <script>
            function checkUsername(username){
                // Start valid, if invalid, turn false
                validUsername = true;

                // Inform the user the username is taken
                usernameMessage = "This username is taken.\nPlease enter a new one."

                // TODO
                // Send Username to Firebase

                // Inform the user if invalid
                if (validUsername == false){
                    alert(usernameMessage);
                }

                // Return valid or invalid
                return validUsername;
            }
        </script>

        <script>
            function checkEmail(email) {
                validEmail = true;

                correctionMessage = "This email address is not valid. You need:\n'@'\nA domain name.\nExample: Al@gmail.com";

                var AltEmail = email.split('');

                var AtCheck = false;
                var DomainCheck = false;

                for (i = 1; i < AltEmail.length - 3; i++) {
                    // Check for @
                    if (AltEmail[i] == '@'){
                        AtCheck = true;
                    }
                    // Check for .com domain
                    if (AtCheck == true && AltEmail[i] == '.' && AltEmail[i + 1] == 'c' && AltEmail[i + 2] == 'o' && AltEmail[i + 3] == 'm') {
                        console.log(AltEmail[i], AltEmail[i + 1], AltEmail[i + 2], AltEmail[i + 3])
                        DomainCheck = true;
                    }
                    // Check for .net domain
                    if (AtCheck == true && AltEmail[i] == '.' && AltEmail[i + 1] == 'n' && AltEmail[i + 2] == 'e' && AltEmail[i + 3] == 't') {
                        DomainCheck = true;
                    }
                    // Check for .org domain
                    // if (AtCheck == true && AltEmail[i] == '.' && AltEmail[i + 1] == 'o' && AltEmail[i + 2] == 'r' && AltEmail[i + 3] == 'g') {
                    //     DomainCheck = true;
                    // }
                }

                if (AtCheck == false || DomainCheck == false) {
                    console.log(AtCheck);
                    console.log(DomainCheck);
                    validEmail = false;
                }

                if (validEmail == false) {
                    alert(correctionMessage);
                }

                return validEmail;
            }
        </script>

        <script>
            function checkPassword(password){
                // Start valid, if invalde, turn false
                validPassword = true;

                // Message to inform the user about the requirements
                correctionMessage = "The password should satisfy the following:\nBe 8 or more characters long\nContain 1 or more numebrs\nContain 1 or more '*,#,?,/,$'";
                
                var AltPassword = password.split('');
                console.log(AltPassword);

                // length check
                if (AltPassword.length < 8) {
                    validPassword = false;
                }

                var passwordNum = false;
                var passwordSym = false;
                for (i = 0; i < AltPassword.length; i++) {
                    // number check
                    if (AltPassword[i] == '0' || AltPassword[i] == '1' || AltPassword[i] == '2' || AltPassword[i] == '3' || AltPassword[i] == '4' || AltPassword[i] == '5' || AltPassword[i] == '6' || AltPassword[i] == '7' || AltPassword[i] == '8' || AltPassword[i] == '9') {
                        passwordNum = true;
                    }
                    // symbol check
                    if (AltPassword[i] == '*' || AltPassword[i] == '#' || AltPassword[i] == '?' || AltPassword[i] == '/' || AltPassword[i] == '$') {
                        passwordSym = true;
                    }
                }

                if (passwordNum == false || passwordSym == false) {
                    validPassword = false;
                }

                // If invalid
                if (validPassword == false){
                    alert(correctionMessage);
                }

                // return valid or not
                return validPassword;
            }
        </script>

        <script>
            function signUp(){
                // Textfield variables
                var inputUsername = document.getElementById("Usernames").value;
                var inputPassword = document.getElementById("Passwords").value;
                
                // Validity checks
                var validU = checkEmail(inputUsername);
                var validP = checkPassword(inputPassword);
                //alert("Username: " + inputUsername + "\nPassword: " + inputPassword);

                // If both are valid
                if (validU == true && validP == true){
                    alert("The username and password were accepeted");
                    // add username and password to the database
                    // take user to homepage
                }
            }
        </script>
        <h1>Login / Sign Up</h1>
        
        <!-- UI Elements -->
        <!-- Username textfield -->
        <input type="text" name="username" id="Usernames" placeholder="Username" required> 
        <!-- Password textfield -->
        <input type="password" name="password" id="Passwords" placeholder="Password" required>
        <!-- Login button (no functionality) -->
        <input type="submit" value="Login">
        <!-- Sign up button -->
        <input type="submit" value="Sign Up" onclick=signUp();>
        <!-- modal -->
    </body>
</html>

